<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/png" href="http://www.jeffreythompson.org/graphics/favicon.png">
    <title>Collision Detection</title>

    <!-- FONTS AND CSS -->
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i|Raleway:400,600,800" rel="stylesheet">
    <link href="css/stylesheet.css" rel="stylesheet" />
    <link href="css/atom-light.css" rel="stylesheet" />
  </head>

  <body>
    <div id="wrapper">
      <header>
        <a href="line-line.html" id="prev">&larr;</a>
        <span id="title">
            <a href="index.html">Collision Detection</a><br/>
            <a href="table_of_contents.html"><small>Table of Contents</small></a>
        </span>
        <a href="section_3_challenges.html" id="next">&rarr;</a>
      </header>

      <div id="sketch" hidden></div>

      <main>
        <h1><a id="linerectangle" class="anchor" href="#linerectangle" aria-hidden="true" rel="nofollow"></a>LINE/RECTANGLE</h1>
<p>We've actually already covered how to check if a line has hit a rectangle: it's really just four <a href="line-line.html" rel="nofollow">Line/Line</a> collisions, one for each side!</p>
<p>For example, the left edge of the square starts at <code>(rx,ry)</code> and extends down to <code>ry+rh</code>. We can treat that as a line, using the algorithm we made in the last section:</p>
<div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;left&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>lineLine</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>y2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="keyword operator js"><span>+</span></span><span>rh</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></div>
<p>This can be more easily visualized like this:</p>
<p><img src="images/line-rect.jpg" alt="Dividing a rectangle into four lines"></p>
<p>We do the same for the other three sides:</p>
<div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;left&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>lineLine</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>y2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="meta delimiter object comma js"><span>,</span></span><span>rx</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;ry</span><span class="keyword operator js"><span>+</span></span><span>rh</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;right&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>lineLine</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>y2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="keyword operator js"><span>+</span></span><span>rw</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="keyword operator js"><span>+</span></span><span>rw</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="keyword operator js"><span>+</span></span><span>rh</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;top&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>lineLine</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>y2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="keyword operator js"><span>+</span></span><span>rw</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;bottom&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>lineLine</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>y2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="keyword operator js"><span>+</span></span><span>rh</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="keyword operator js"><span>+</span></span><span>rw</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="keyword operator js"><span>+</span></span><span>rh</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></div>
<p>If <em>any</em> of the above statements are true, the line has hit the rectangle.</p>
<div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>left&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;right&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;top&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;bottom</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></div>
<p>A full example is below. Note that the red dots are drawn in the <a href="line-line.html" rel="nofollow">Line/Line</a> function, showing where the line intersects the rectangle. You can delete them from the function if you don't want them in your finished project.</p>
<div class="highlight javascript"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;x1&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;points&nbsp;for&nbsp;line&nbsp;(controlled&nbsp;by&nbsp;mouse)</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;y1&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;x2&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;static&nbsp;point</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;y2&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;sx&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>200</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;square&nbsp;position</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;sy&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>100</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;sw&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>200</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;and&nbsp;size</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;sh&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>200</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>setup</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;canvas&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createCanvas</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>600</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>400</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>strokeWeight</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>5</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;make&nbsp;the&nbsp;line&nbsp;easier&nbsp;to&nbsp;see</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>draw</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>background</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>255</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;set&nbsp;end&nbsp;of&nbsp;line&nbsp;to&nbsp;mouse&nbsp;coordinates</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;x1&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;mouseX</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;y1&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;mouseY</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;check&nbsp;if&nbsp;line&nbsp;has&nbsp;hit&nbsp;the&nbsp;square</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;if&nbsp;so,&nbsp;change&nbsp;the&nbsp;fill&nbsp;color</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;hit&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>lineRect</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>y2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;sx</span><span class="meta delimiter object comma js"><span>,</span></span><span>sy</span><span class="meta delimiter object comma js"><span>,</span></span><span>sw</span><span class="meta delimiter object comma js"><span>,</span></span><span>sh</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>hit</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>fill</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>255</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="constant numeric decimal js"><span>150</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>fill</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="constant numeric decimal js"><span>150</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="constant numeric decimal js"><span>255</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>noStroke</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>rect</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>sx</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;sy</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;sw</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;sh</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;draw&nbsp;the&nbsp;line</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>stroke</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>150</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>line</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;y2</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;LINE/RECTANGLE</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>lineRect</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>x1</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>y1</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>x2</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>y2</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>rx</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>ry</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>rw</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>rh</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;check&nbsp;if&nbsp;the&nbsp;line&nbsp;has&nbsp;hit&nbsp;any&nbsp;of&nbsp;the&nbsp;rectangle&#39;s&nbsp;sides</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;uses&nbsp;the&nbsp;Line/Line&nbsp;function&nbsp;below</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;left&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>lineLine</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>y2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="meta delimiter object comma js"><span>,</span></span><span>rx</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;ry</span><span class="keyword operator js"><span>+</span></span><span>rh</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;right&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>lineLine</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>y2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="keyword operator js"><span>+</span></span><span>rw</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="keyword operator js"><span>+</span></span><span>rw</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="keyword operator js"><span>+</span></span><span>rh</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;top&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>lineLine</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>y2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="keyword operator js"><span>+</span></span><span>rw</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;bottom&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>lineLine</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>x1</span><span class="meta delimiter object comma js"><span>,</span></span><span>y1</span><span class="meta delimiter object comma js"><span>,</span></span><span>x2</span><span class="meta delimiter object comma js"><span>,</span></span><span>y2</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="keyword operator js"><span>+</span></span><span>rh</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rx</span><span class="keyword operator js"><span>+</span></span><span>rw</span><span class="meta delimiter object comma js"><span>,</span></span><span>ry</span><span class="keyword operator js"><span>+</span></span><span>rh</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;if&nbsp;ANY&nbsp;of&nbsp;the&nbsp;above&nbsp;are&nbsp;true,&nbsp;the&nbsp;line</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;has&nbsp;hit&nbsp;the&nbsp;rectangle</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>left&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;right&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;top&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;bottom</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;LINE/LINE</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>lineLine</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>x1</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>y1</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>x2</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>y2</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>x3</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>y3</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>x4</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="variable parameter function js"><span>y4</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;calculate&nbsp;the&nbsp;direction&nbsp;of&nbsp;the&nbsp;lines</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;uA&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span><span>(</span></span><span>x4</span><span class="keyword operator js"><span>-</span></span><span>x3</span><span class="meta brace round js"><span>)</span></span><span class="keyword operator js"><span>*</span></span><span class="meta brace round js"><span>(</span></span><span>y1</span><span class="keyword operator js"><span>-</span></span><span>y3</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>-</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>y4</span><span class="keyword operator js"><span>-</span></span><span>y3</span><span class="meta brace round js"><span>)</span></span><span class="keyword operator js"><span>*</span></span><span class="meta brace round js"><span>(</span></span><span>x1</span><span class="keyword operator js"><span>-</span></span><span>x3</span><span class="meta brace round js"><span>)</span><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>/</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span><span>(</span></span><span>y4</span><span class="keyword operator js"><span>-</span></span><span>y3</span><span class="meta brace round js"><span>)</span></span><span class="keyword operator js"><span>*</span></span><span class="meta brace round js"><span>(</span></span><span>x2</span><span class="keyword operator js"><span>-</span></span><span>x1</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>-</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>x4</span><span class="keyword operator js"><span>-</span></span><span>x3</span><span class="meta brace round js"><span>)</span></span><span class="keyword operator js"><span>*</span></span><span class="meta brace round js"><span>(</span></span><span>y2</span><span class="keyword operator js"><span>-</span></span><span>y1</span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;uB&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span><span>(</span></span><span>x2</span><span class="keyword operator js"><span>-</span></span><span>x1</span><span class="meta brace round js"><span>)</span></span><span class="keyword operator js"><span>*</span></span><span class="meta brace round js"><span>(</span></span><span>y1</span><span class="keyword operator js"><span>-</span></span><span>y3</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>-</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>y2</span><span class="keyword operator js"><span>-</span></span><span>y1</span><span class="meta brace round js"><span>)</span></span><span class="keyword operator js"><span>*</span></span><span class="meta brace round js"><span>(</span></span><span>x1</span><span class="keyword operator js"><span>-</span></span><span>x3</span><span class="meta brace round js"><span>)</span><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>/</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span><span>(</span></span><span>y4</span><span class="keyword operator js"><span>-</span></span><span>y3</span><span class="meta brace round js"><span>)</span></span><span class="keyword operator js"><span>*</span></span><span class="meta brace round js"><span>(</span></span><span>x2</span><span class="keyword operator js"><span>-</span></span><span>x1</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>-</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>x4</span><span class="keyword operator js"><span>-</span></span><span>x3</span><span class="meta brace round js"><span>)</span></span><span class="keyword operator js"><span>*</span></span><span class="meta brace round js"><span>(</span></span><span>y2</span><span class="keyword operator js"><span>-</span></span><span>y1</span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;if&nbsp;uA&nbsp;and&nbsp;uB&nbsp;are&nbsp;between&nbsp;0-1,&nbsp;lines&nbsp;are&nbsp;colliding</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>uA&nbsp;</span><span class="keyword operator comparison js"><span>&gt;=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;uA&nbsp;</span><span class="keyword operator comparison js"><span>&lt;=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;uB&nbsp;</span><span class="keyword operator comparison js"><span>&gt;=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;uB&nbsp;</span><span class="keyword operator comparison js"><span>&lt;=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;optionally,&nbsp;draw&nbsp;a&nbsp;circle&nbsp;where&nbsp;the&nbsp;lines&nbsp;meet</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;intersectionX&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;x1&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>uA&nbsp;</span><span class="keyword operator js"><span>*</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>x2</span><span class="keyword operator js"><span>-</span></span><span>x1</span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;intersectionY&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;y1&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>uA&nbsp;</span><span class="keyword operator js"><span>*</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>y2</span><span class="keyword operator js"><span>-</span></span><span>y1</span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>fill</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>255</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>noStroke</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>ellipse</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>intersectionX</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;intersectionY</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>20</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>20</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre></div>
<p>This algorithm can also be used to test <a href="http://en.wikipedia.org/wiki/Line_of_sight_%28gaming%29" rel="nofollow">line-of-sight</a>. Let's say you have two objects and a rectangular obstacle: if you draw a line between one object and another, then check if it has hit the rectangle, you can tell if the objects can &quot;see&quot; each other or if they are hidden behind the obstacle.</p>
<p><img src="images/line-of-sight.jpg" alt="An example of line of sight"></p>
<p>For an example of this in code, see the <a href="https://github.com/jeffThompson/ProcessingTeachingSketches/blob/master/InteractionAndGames/LineOfSight/LineOfSight.pde" rel="nofollow">&quot;Line Of Sight&quot; example</a> in my <a href="https://github.com/jeffThompson/ProcessingTeachingSketches" rel="nofollow">Processing teaching repository</a>.</p>

      </main>

      <footer>
        <p>[ <a href="./index.html">intro</a>, <a href="https://github.com/crhallberg/CollisionDetection">source</a>, <a href="https://github.com/crhallberg/CollisionDetection/issues">issues</a> ]</p>

        <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" style="width:80px; height:15px" /></a></a>
      </footer>
    </div>

    <!-- nice smart quotes, via: http://smartquotesjs.com -->
    <script src="js/smartquotes.min.js"></script>
    <!-- p5.js -->
    <script src="js/p5.min.js"></script>
    <script>var x1 = 0;      // points for line (controlled by mouse)
var y1 = 0;
var x2 = 0;      // static point
var y2 = 0;

var sx = 200;    // square position
var sy = 100;
var sw = 200;    // and size
var sh = 200;


function setup() {
    var canvas = createCanvas(600, 400);
    canvas.parent('sketch');

    strokeWeight(5);  // make the line easier to see
}


function draw() {
    background(255);

    // set end of line to mouse coordinates
    x1 = mouseX;
    y1 = mouseY;

    // check if line has hit the square
    // if so, change the fill color
    var hit = lineRect(x1,y1,x2,y2, sx,sy,sw,sh);
    if (hit) fill(255,150,0);
    else fill(0,150,255);
    noStroke();
    rect(sx, sy, sw, sh);

    // draw the line
    stroke(0, 150);
    line(x1, y1, x2, y2);
}


// LINE/RECTANGLE
function lineRect(x1,y1,x2,y2, rx,ry,rw,rh) {

    // check if the line has hit any of the rectangle's sides
    // uses the Line/Line function below
    var left =   lineLine(x1,y1,x2,y2, rx,ry,rx, ry+rh);
    var right =  lineLine(x1,y1,x2,y2, rx+rw,ry, rx+rw,ry+rh);
    var top =    lineLine(x1,y1,x2,y2, rx,ry, rx+rw,ry);
    var bottom = lineLine(x1,y1,x2,y2, rx,ry+rh, rx+rw,ry+rh);

    // if ANY of the above are true, the line
    // has hit the rectangle
    if (left || right || top || bottom) {
        return true;
    }
    return false;
}


// LINE/LINE
function lineLine(x1,y1,x2,y2, x3,y3,x4,y4) {

    // calculate the direction of the lines
    var uA = ((x4-x3)*(y1-y3) - (y4-y3)*(x1-x3)) / ((y4-y3)*(x2-x1) - (x4-x3)*(y2-y1));
    var uB = ((x2-x1)*(y1-y3) - (y2-y1)*(x1-x3)) / ((y4-y3)*(x2-x1) - (x4-x3)*(y2-y1));

    // if uA and uB are between 0-1, lines are colliding
    if (uA >= 0 && uA <= 1 && uB >= 0 && uB <= 1) {

        // optionally, draw a circle where the lines meet
        var intersectionX = x1 + (uA * (x2-x1));
        var intersectionY = y1 + (uA * (y2-y1));
        fill(255,0,0);
        noStroke();
        ellipse(intersectionX, intersectionY, 20, 20);

        return true;
    }
    return false;
}document.getElementById('sketch').removeAttribute('hidden');</script>
  </body>
</html>
